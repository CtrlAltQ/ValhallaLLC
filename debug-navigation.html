<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Navigation</title>
    <style>
        body { font-family: Arial, sans-serif; background: #0B0B0B; color: #F5F3F0; padding: 20px; }
        .debug-section { margin: 20px 0; padding: 20px; background: #1E1E1E; border-radius: 8px; }
        .result { padding: 10px; margin: 10px 0; border-radius: 4px; background: #333; }
        .error { background: #5a2d2d; color: #ff6b6b; }
        .success { background: #2d5a2d; color: #90ee90; }
        button { background: #A70000; color: #F5F3F0; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; }
    </style>
</head>
<body>
    <h1>Debug Portfolio Navigation</h1>
    
    <div class="debug-section">
        <h2>Step 1: Test Artist Data Access</h2>
        <button onclick="debugArtistData()">Test Artist Data</button>
        <div id="artist-data-debug"></div>
    </div>
    
    <div class="debug-section">
        <h2>Step 2: Test File Existence</h2>
        <button onclick="debugFileAccess()">Test File Access</button>
        <div id="file-debug"></div>
    </div>
    
    <div class="debug-section">
        <h2>Step 3: Simulate Navigation</h2>
        <button onclick="debugNavigation()">Test Navigation Logic</button>
        <div id="navigation-debug"></div>
    </div>
    
    <div class="debug-section">
        <h2>Step 4: Manual Navigation Test</h2>
        <p>Click these buttons to simulate the actual navigation:</p>
        <button onclick="simulatePortfolioClick('micah')">Navigate to Micah</button>
        <button onclick="simulatePortfolioClick('pagan')">Navigate to Pagan</button>
        <button onclick="simulatePortfolioClick('jimmy')">Navigate to Jimmy</button>
        <button onclick="simulatePortfolioClick('kason')">Navigate to Kason</button>
        <button onclick="simulatePortfolioClick('sarah')">Navigate to Sarah</button>
        <div id="manual-debug"></div>
    </div>

    <script src="js/artist-data.js"></script>
    <script>
        function addResult(containerId, message, isSuccess = true) {
            const container = document.getElementById(containerId);
            const result = document.createElement('div');
            result.className = `result ${isSuccess ? 'success' : 'error'}`;
            result.innerHTML = message;
            container.appendChild(result);
        }
        
        function clearResults(containerId) {
            document.getElementById(containerId).innerHTML = '';
        }
        
        function debugArtistData() {
            clearResults('artist-data-debug');
            
            const artists = ['micah', 'pagan', 'jimmy', 'kason', 'sarah'];
            
            // Test if ArtistManager exists
            if (typeof ArtistManager === 'undefined') {
                addResult('artist-data-debug', '❌ ArtistManager is not defined', false);
                return;
            }
            
            addResult('artist-data-debug', '✅ ArtistManager is available');
            
            artists.forEach(slug => {
                try {
                    const artist = ArtistManager.getArtistBySlug(slug);
                    if (artist) {
                        addResult('artist-data-debug', `✅ ${slug}: Found "${artist.name}" (${artist.specialty})`);
                    } else {
                        addResult('artist-data-debug', `❌ ${slug}: Artist data not found`, false);
                    }
                } catch (error) {
                    addResult('artist-data-debug', `❌ ${slug}: Error - ${error.message}`, false);
                }
            });
            
            // Also test direct access to ArtistData
            if (typeof ArtistData !== 'undefined') {
                addResult('artist-data-debug', '✅ ArtistData is available');
                addResult('artist-data-debug', `📊 Available keys: ${Object.keys(ArtistData).join(', ')}`);
            } else {
                addResult('artist-data-debug', '❌ ArtistData is not defined', false);
            }
        }
        
        async function debugFileAccess() {
            clearResults('file-debug');
            
            const artists = ['micah', 'pagan', 'jimmy', 'kason', 'sarah'];
            
            for (const slug of artists) {
                try {
                    const url = `portfolio/${slug}.html`;
                    const response = await fetch(url);
                    
                    if (response.ok) {
                        addResult('file-debug', `✅ ${url} - Status: ${response.status} (${response.statusText})`);
                    } else {
                        addResult('file-debug', `❌ ${url} - Status: ${response.status} (${response.statusText})`, false);
                    }
                } catch (error) {
                    addResult('file-debug', `❌ portfolio/${slug}.html - Network Error: ${error.message}`, false);
                }
            }
        }
        
        function debugNavigation() {
            clearResults('navigation-debug');
            
            const artists = ['micah', 'pagan', 'jimmy', 'kason', 'sarah'];
            
            artists.forEach(slug => {
                // Simulate the exact logic from artists.js
                const artistExists = ArtistManager && ArtistManager.getArtistBySlug(slug);
                const url = `portfolio/${slug}.html`;
                
                if (artistExists) {
                    addResult('navigation-debug', `✅ ${slug}: Artist exists, would navigate to ${url}`);
                } else {
                    addResult('navigation-debug', `❌ ${slug}: Artist not found, navigation would fail`, false);
                }
            });
        }
        
        function simulatePortfolioClick(artistSlug) {
            clearResults('manual-debug');
            
            addResult('manual-debug', `🔄 Simulating click for artist: ${artistSlug}`);
            
            // Exact logic from artists.js
            if (artistSlug && ArtistManager.getArtistBySlug(artistSlug)) {
                const url = `portfolio/${artistSlug}.html`;
                addResult('manual-debug', `✅ Artist found, navigating to: ${url}`);
                
                // Actually navigate
                setTimeout(() => {
                    window.location.href = url;
                }, 1000);
            } else {
                addResult('manual-debug', `❌ Artist not found: ${artistSlug}`, false);
                addResult('manual-debug', `🔍 Available artists: ${Object.keys(ArtistData || {}).join(', ')}`);
            }
        }
        
        // Auto-run tests on page load
        window.addEventListener('load', function() {
            setTimeout(() => {
                debugArtistData();
                setTimeout(() => debugFileAccess(), 1000);
                setTimeout(() => debugNavigation(), 2000);
            }, 500);
        });
    </script>
</body>
</html>