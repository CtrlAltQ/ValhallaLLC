/**
 * Browser-Specific Fixes
 * CSS fixes for cross-browser compatibility issues
 */

/* Safari-specific fixes */
.browser-safari .hero__video {
  /* Fix Safari video autoplay issues */
  -webkit-playsinline: true;
  playsinline: true;
}

.browser-safari .lightbox-overlay {
  /* Fix Safari backdrop-filter performance */
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
}

.browser-safari .main-nav {
  /* Fix Safari sticky positioning */
  position: -webkit-sticky;
  position: sticky;
}

/* Firefox-specific fixes */
.browser-firefox .portfolio-gallery {
  /* Fix Firefox masonry layout */
  display: -moz-grid;
  display: grid;
}

.browser-firefox .artist-card__overlay {
  /* Fix Firefox transform performance */
  will-change: transform, opacity;
}

.browser-firefox .lightbox-image {
  /* Fix Firefox image scaling */
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
}

/* Edge-specific fixes */
.browser-edge .hero__background {
  /* Fix Edge video background issues */
  overflow: hidden;
}

.browser-edge .portfolio-grid {
  /* Fix Edge CSS Grid issues */
  display: -ms-grid;
  display: grid;
}

.browser-edge .artist-grid__container {
  /* Fix Edge grid gap issues */
  grid-gap: var(--space-8);
  gap: var(--space-8);
}

/* Chrome-specific fixes */
.browser-chrome .loading-screen__progress-bar {
  /* Fix Chrome animation performance */
  transform: translateZ(0);
}

/* Older browser fallbacks */
.no-grid .artist-grid__container {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-8);
}

.no-grid .artist-card {
  flex: 1 1 300px;
  max-width: 400px;
}

.no-flexbox .artist-grid__container {
  display: block;
}

.no-flexbox .artist-card {
  display: inline-block;
  vertical-align: top;
  width: 300px;
  margin: var(--space-4);
}

.no-customproperties {
  /* Fallback colors for browsers without CSS custom properties */
  --color-primary: #d4af37;
  --color-secondary: #8b7355;
  --color-background: #1a1a1a;
  --color-text: #ffffff;
}

/* WebP support fallbacks */
.no-webp .hero__background-img {
  background-image: url('../images/valhalla_heropic.jpg');
}

.no-webp .artist-card__img {
  /* Fallback to JPEG images */
  content: url('../images/gallery/' attr(data-artist) '.jpg');
}

/* Intersection Observer fallbacks */
.no-intersectionobserver .fade-in,
.no-intersectionobserver .slide-up {
  opacity: 1;
  transform: none;
}

/* Service Worker fallbacks */
.no-serviceworker .offline-indicator {
  display: none;
}

/* Touch device optimizations */
.supports-touchevents .lightbox-nav,
.supports-touchevents .zoom-controls button {
  min-height: 48px;
  min-width: 48px;
}

.supports-touchevents .btn {
  min-height: 44px;
  padding: 12px 24px;
}

/* Pointer events fallbacks */
.no-pointerevents .lightbox-image-container {
  /* Fallback to mouse events only */
  touch-action: none;
}

/* High DPI display optimizations */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .main-nav__logo-img,
  .loading-screen__logo-img {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* Print-specific fixes */
@media print {
  .browser-safari .hero {
    /* Fix Safari print issues */
    -webkit-print-color-adjust: exact;
    color-adjust: exact;
  }
  
  .browser-firefox .portfolio-grid {
    /* Fix Firefox print layout */
    display: block;
  }
  
  .browser-firefox .portfolio-item {
    break-inside: avoid;
    page-break-inside: avoid;
  }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .browser-safari .hero__video,
  .browser-chrome .hero__video,
  .browser-firefox .hero__video,
  .browser-edge .hero__video {
    display: none;
  }
  
  .browser-safari .hero__background-fallback,
  .browser-chrome .hero__background-fallback,
  .browser-firefox .hero__background-fallback,
  .browser-edge .hero__background-fallback {
    display: block;
  }
}

/* Dark mode support across browsers */
@media (prefers-color-scheme: dark) {
  .browser-safari,
  .browser-chrome,
  .browser-firefox,
  .browser-edge {
    color-scheme: dark;
  }
}

/* Focus improvements for different browsers */
.browser-safari button:focus,
.browser-safari a:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

.browser-firefox button:focus,
.browser-firefox a:focus {
  outline: 2px dotted var(--color-primary);
  outline-offset: 2px;
}

.browser-edge button:focus,
.browser-edge a:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* Form styling consistency */
.browser-safari input,
.browser-safari textarea,
.browser-safari select {
  -webkit-appearance: none;
  appearance: none;
}

.browser-firefox input,
.browser-firefox textarea,
.browser-firefox select {
  -moz-appearance: none;
  appearance: none;
}

/* Scrollbar styling */
.browser-webkit ::-webkit-scrollbar {
  width: 8px;
}

.browser-webkit ::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
}

.browser-webkit ::-webkit-scrollbar-thumb {
  background: var(--color-primary);
  border-radius: 4px;
}

.browser-firefox {
  scrollbar-width: thin;
  scrollbar-color: var(--color-primary) rgba(255, 255, 255, 0.1);
}